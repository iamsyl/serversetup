---

- hosts: localhost
  connection: local
  gather_facts: no
  become: true
  vars:
    ad_join_user: 'administrator'
    ad_server_ip: '192.168.7.4'
    ad_server: 'dc.silas.local'
    ad_domain: 'SILAS.LOCAL'
    ad_join_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30373161383734356566333335363464646132396438343730383932326538663534656662323434
          6461343530303963363031366533363636396534396462380a363430396332343434653130623035
          39316565383166393163653962303163383065623263666464383936356334616462336633616237
          3433376666666134650a373138343130306565376134393039303133366135316135613039653764
          3939

#  pre_tasks:
#    - name: update repositories for RedHat
#      dnf:
#        update_cache: yes
#      changed_when: false
#      when: ansible_os_family == "RedHat"

#    - name: update repositories for Debian
#      apt:
#        update_cache: yes
#      changed_when: false
#      when: ansible_os_family == "Debian"
  
  tasks:
  - include: tasks/joindomain.yml 
#  - include: tasks/users.yml
  - include: tasks/packages.yml
#  - include: tasks/cron.yml
